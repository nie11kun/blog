<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:wfw="http://wellformedweb.org/CommentAPI/">
<channel>
<title>Marco Nie - 2020年12月</title>
<link>https://blog.niekun.net/2020/12/</link>
<atom:link href="https://blog.niekun.net/feed/2020/12/" rel="self" type="application/rss+xml" />
<language>zh-CN</language>
<description>you are the company you keep...</description>
<lastBuildDate>Tue, 01 Dec 2020 11:37:00 +0800</lastBuildDate>
<pubDate>Tue, 01 Dec 2020 11:37:00 +0800</pubDate>
<item>
<title>Macros 聚集 in c++</title>
<link>https://blog.niekun.net/archives/1956.html</link>
<guid>https://blog.niekun.net/archives/1956.html</guid>
<pubDate>Tue, 01 Dec 2020 11:37:00 +0800</pubDate>
<dc:creator>admin</dc:creator>
<description><![CDATA[在 c++ 中，一个 Macro 就是一段代码的聚合。使用这个 macro 名称就代表着对应的代码段。有两种常见的 macro：object 形式，function 形式。可以定义任意有效的字符...]]></description>
<content:encoded xml:lang="zh-CN"><![CDATA[
<p>在 c++ 中，一个 Macro 就是一段代码的聚合。使用这个 macro 名称就代表着对应的代码段。</p><p>有两种常见的 macro：object 形式，function 形式。可以定义任意有效的字符作为 macro 名称，甚至是 c 关键词。</p><!--more--><h3>object 形式</h3><p>object 形式的 macro 就是简单的使用一个 identifier 代替代码片段。使用 <code>#define</code> 定义一个 macro：</p><pre><code>#define TESTINT 1024

void main() {
    int a = TESTINT;
    cout &lt;&lt; a &lt;&lt; endl;
}

//output:
//1024</code></pre><p>也可以定义一个片段：</p><pre><code>#define NUMBERS 1, 2, 3

void main() {
    int x[] = { NUMBERS };
    //int x[] = { 1, 2, 3 };这两句效果相同
}</code></pre><p>也可以多层定义：</p><pre><code>#define NUMBER1 1
#define NUMBER2 NUMBER1</code></pre><p>以上示例中 NUMBER2 等于 NUMBER1。</p><h3>function 形式</h3><p>可以定义 function 形式的 macro，需要在定义中 macro 名称后加上圆括号<code>()</code>。例如：</p><pre><code>#define lang_init()  c_init()</code></pre><p>定义后就可以使用 <code>lang_init()</code> 来调用 <code>c_init()</code> 了，类似于 alias。</p><p>object 类型的 macro 可以和 function 类型的 macro 同名，区别就是有没有圆括号：</p><pre><code>#define test 100
#define test() func()

void main() {
    int a = test;
    test();
}</code></pre><p>以上就是对 macro 的简单介绍。</p><p>参考链接：<br><a href="https://gcc.gnu.org/onlinedocs/cpp/Macros.html">https://gcc.gnu.org/onlinedocs/cpp/Macros.html</a></p>
]]></content:encoded>
<slash:comments>0</slash:comments>
<comments>https://blog.niekun.net/archives/1956.html#comments</comments>
<wfw:commentRss>https://blog.niekun.net/feed/archives/1956.html</wfw:commentRss>
</item>
</channel>
</rss>