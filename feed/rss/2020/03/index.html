<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns="http://purl.org/rss/1.0/"
xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel rdf:about="https://niekun.net/feed/rss/2020/03/">
<title>Marco Nie - 2020年3月</title>
<link>https://niekun.net/2020/03/</link>
<description>I’m dancing at the feet of my lord...</description>
<items>
<rdf:Seq>
<rdf:li resource="https://niekun.net/archives/1296.html"/>
<rdf:li resource="https://niekun.net/archives/1280.html"/>
<rdf:li resource="https://niekun.net/archives/1258.html"/>
<rdf:li resource="https://niekun.net/archives/1257.html"/>
<rdf:li resource="https://niekun.net/archives/1252.html"/>
<rdf:li resource="https://niekun.net/archives/1249.html"/>
<rdf:li resource="https://niekun.net/archives/1243.html"/>
<rdf:li resource="https://niekun.net/archives/1237.html"/>
<rdf:li resource="https://niekun.net/archives/1219.html"/>
<rdf:li resource="https://niekun.net/archives/1212.html"/>
</rdf:Seq>
</items>
</channel>
<item rdf:about="https://niekun.net/archives/1296.html">
<title>获取用户真实 IP in Nginx</title>
<link>https://niekun.net/archives/1296.html</link>
<dc:date>2020-03-06T15:00:08+08:00</dc:date>
<description>对于没有连代理访问网站的用户或者没有加 CND 的网站，可以直接在 Nginx 中用 deny 命令来拒绝某个 IP 的访问，$remote_addr 存储了当前链接用户的 IP:https://nginx.org/en/docs/http/ngx_http_access_module.html#denylocation / {
    deny  192.168.1.1;
    allow 192.168.1.0/24;
    allow 10.1.1.0/16;
    allow 2001:0db8::/32;
    deny  all;
}如果加了代理或者 CND 就没法直接获取到用户真实 IP 了，可以在 nginx 使用以下指令提取用户真实 IP：#获取用户真实IP，并赋值给变量$clientRealIP
map $http_x_forwarded_for  $clientRealIp {
        &quot;&quot;      $remote_addr;
        ~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$  $firstAddr;
}或者：set $realip $remote_addr;
  if ($http_x_forwarded_for ~ &quot;^(\d+\.\d+\.\d+\.\d+)&quot;) {
    set $realip $1;
  }</description>
</item>
<item rdf:about="https://niekun.net/archives/1280.html">
<title>Nginx upstream timed out 问题的处理</title>
<link>https://niekun.net/archives/1280.html</link>
<dc:date>2020-03-05T08:53:00+08:00</dc:date>
<description>在安装 wordpress 后遇到一个问题，打开后台的 theme 页面后，一直无法加载出来内容，查看后台 nginx 的日志，发现如下错误：[error] 10929#10929: *337 upstream timed out (110: Connection timed out) while reading upstream, client: 127.0.0.1, server: 127.0.0.1, request: &quot;GET /wp-admin/theme-install.php HTTP/1.1&quot;, upstream: &quot;fastcgi://unix:/run/php/php7.3-fpm.sock:&quot;, host: &quot;127.0.0.1&quot;, referrer: &quot;http://127.0.0.1/wp-admin/themes.php&quot;大概是处理 php 页面的时候 timeout 了，Google 了发现问题出在 fastCGI 上:https://talk.plesk.com/threads/upstream-timed-out-110-connection-timed-out-randomly.350497/解决方案就是在 nginx 配置文件内定义一下相关超时时间设定：proxy_connect_timeout 600;
proxy_send_timeout 600;
proxy_read_timeout 600;
send_timeout 600;将上述内容加入 config 文件，reload nginx 测试页面加载是否正常：sudo service nginx configtest
sudo service nginx reload


</description>
</item>
<item rdf:about="https://niekun.net/archives/1258.html">
<title>Windows 10 WSL 不支持 systemd</title>
<link>https://niekun.net/archives/1258.html</link>
<dc:date>2020-03-04T11:44:25+08:00</dc:date>
<description>在使用 WSL 中发现无法使用 systemd 指令，会有如下报错信息：System has not been booted with systemd as init system (PID 1). Can't operate查询后发现 WSL 的确有这个问题：https://github.com/MicrosoftDocs/WSL/issues/457解决方法是用管理员权限打开 WSL，然后使用 sudo service 来控制进程，如：sudo service nginx start
</description>
</item>
<item rdf:about="https://niekun.net/archives/1257.html">
<title>Nginx 可用指令和变量索引</title>
<link>https://niekun.net/archives/1257.html</link>
<dc:date>2020-03-04T11:19:18+08:00</dc:date>
<description>手册：http://nginx.org/en/docs/涵盖了安装教程，开始使用教程，常用使用情景教程，指令索引，变量索引 等链接。变量：http://nginx.org/en/docs/varindex.html变量在 nginx 配置中使用很多，使用变量可以根据需要处理特定部分。如：$rui, $scheme, $request_filename, $host, $request_uri指令：http://nginx.org/en/docs/dirindex.html如：listen, include, location, if, auth_basic</description>
</item>
<item rdf:about="https://niekun.net/archives/1252.html">
<title>Git 命令行基本操作</title>
<link>https://niekun.net/archives/1252.html</link>
<dc:date>2020-03-04T09:53:00+08:00</dc:date>
<description>Git 是目前世界上最流行的版本控制工具，它可以记录历史操作和协同工作。Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.下面介绍 Git 命令行工具的安装和使用。[...]</description>
</item>
<item rdf:about="https://niekun.net/archives/1249.html">
<title>关于手机端无法使用 typecho 的搜索框解决</title>
<link>https://niekun.net/archives/1249.html</link>
<dc:date>2020-03-03T22:34:48+08:00</dc:date>
<description>最近自己做了一个 typecho 的主题，主要是手机端的页面优化和字体优化，使用了 bootstrap 来渲染，主题在 GitHub 上开源：https://github.com/nie11kun/TypechoAwesome但是测试发现搜索框无法正确搜索，总是返回主页。今天终于发现问题所在了，由于我的网站使用的 NS 服务是 cloudflare 的，在当时设置的时候，把移动端 Mobile Redirect 优化选择上了，每次访问网站都会重定向到 m.niekun.net，估计是 cf 做了什么精简，导致功能丢失，把 Mobile Redirect 关闭就正常了。具体修改路径是 speed - optimisation：页面拉到最下方，将 Mobile Redirect 关掉：再次访问主页，就不会重定向到 m.niekun.net 而是 niekun.net 了。</description>
</item>
<item rdf:about="https://niekun.net/archives/1243.html">
<title>Typecho 配合 Nginx 设置伪静态链接</title>
<link>https://niekun.net/archives/1243.html</link>
<dc:date>2020-03-03T21:57:00+08:00</dc:date>
<description>由于 typecho 是一个动态网页，每篇文章都 URL 都是形如：https://niekun.net/index.php/archives/192.html这种包含 php 的动态网站首先不太美观链接比较长，而且在搜索引擎索引时也对动态链接不太友好。所以需要将以上链接形式进行处理，使网页看起来更像静态链接，形如：https://niekun.net/archives/192.html。[...]</description>
</item>
<item rdf:about="https://niekun.net/archives/1237.html">
<title>Gradient Map in Photoshop</title>
<link>https://niekun.net/archives/1237.html</link>
<dc:date>2020-03-03T14:28:00+08:00</dc:date>
<description>Photoshop 中的 Gradient Map 常用来进行颜色替换，它的原理是根据当前图像的亮度和 gradient map 里定义的渐变进行转换。在图层里画三个亮度不一样的线段：[...]</description>
</item>
<item rdf:about="https://niekun.net/archives/1219.html">
<title>SSD 安装 Windows 那些事</title>
<link>https://niekun.net/archives/1219.html</link>
<dc:date>2020-03-03T09:32:32+08:00</dc:date>
<description>最近给笔记本买了一块 SSD，重装了一次系统。经过这些天的使用出现的问题，发现了一些需要注意的事项，在此做一下记录。关键词：UEFI GPT ESP MSR 4K LPM[...]</description>
</item>
<item rdf:about="https://niekun.net/archives/1212.html">
<title>vim 常用指令</title>
<link>https://niekun.net/archives/1212.html</link>
<dc:date>2020-03-02T11:16:00+08:00</dc:date>
<description>vim 是 Linux 下常用的编辑器，学会常用的操作如：光标移动 复制 粘贴 删除 撤销 等指令，对于日常使用很有必要，下面介绍常用指令。注意 vim 所有控制指令都区分大小写。[...]</description>
</item>
</rdf:RDF>